<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>omronsentech_camera: mainpage-en.md Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">mainpage-en.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mainpage-en_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# ROS-based OMRON SENTECH Camera SDK</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;## 1. Overview</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;This omronsentech_camera package is provided by OMRON SENTECH, CO.,LTD.</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;Any cameras supported by Linux-based SentechSDK are also supported by this package.</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;This package provides generic access to the camera&#39;s *GenICam GenApi nodes* and functions through SentechSDK&#39;s transport layer module. Note that *GenICam GenApi node* is a different thing from the term *node* in ROS. Each GenICam GenApi node corresponds to the camera device&#39;s feature or register that can be accessed through a generic interface. The detail of the GenICam GenApi can be found in the [GenICam GenApi documentation].</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;## 2. Installation</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;This package has been tested on ROS-Kinetic running under Ubuntu 16.04 64bit.</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;Since this package basically wraps SentechSDK&#39;s transport layer module, SentechSDK must be installed prior to the installation of this package. The SentechSDK (USB3Vision and GigEVision) can be downloaded from the following URL:</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;https://sentech.co.jp/products/USB/software.html.</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;Below are the list of ROS packages needed to build the package:</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;1. camera_info_manager</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;2. image_transport</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;3. message_generation</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;4. sensor_msgs</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;5. std_msgs</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;6. pluginlib</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;7. nodelet</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;8. roscpp</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;9. roslaunch</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;10. roslint</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;11. rospy</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;For installation, either clone the omronsentech_camera.git or copy the directory omronsentech_camera to your catkin workspace. Before building the package as a common ROS package using catkin_make, please ensure that the SentechSDK environment variable has been exported:</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;``$ echo $STAPI_ROOT_PATH``</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;In case that the environment variables has not been exported, if the SentechSDK installation folder is in /opt/sentech, you can export the environment variables used by SentechSDK by executing:</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;``$ source /opt/sentech/.stprofile``</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;The structure of the directory inside the omronsentech_camera is as follows:</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;&lt;pre&gt;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;/</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;|-./CMakeLists.txt</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;|-./nodelet_plugins.xml</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;|-./package.xml</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;|-./rosdoc.yaml</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;|-./doc/</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;|      |-./html/</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;|      |-./mainpage-en.md</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;|      |-./mainpage-ja.md</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;|      |-./manifest.yaml</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;|</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;|-./examples/</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;|      |-./cpp/grabber.cpp</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;|      |-./python/grabber.py</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;|</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;|-./include/</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;|      |-./omronsentech_camera/*.h</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;|                             </div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;|-./launch/</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;|      |-./*.launch</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;|      |-./*.yaml</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;|</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;|-./msg/</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;|      |-./*.msg</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;|</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;|-./src/</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;|      |-./omronsentech_camera/*.cpp</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;|                             </div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;|-./srv/</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;       |-./*.srv</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;&lt;/pre&gt;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;To generate the documentation in the doc folder, execute the following command in the folder omronsentech_camera:</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;``$ rosdoc_lite -o doc ``</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;Please note that doxygen and rosdoc_lite package are required to build the documentation.</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;## 3. Node stcamera_node</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;For easy usage, the stcamera_node provided in the package will automatically connect to either the first found camera, predefined camera, or any camera that it can find (depend on the **camera_to_connect** parameter) and continuously acquire images from the camera.</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;To run the stcamera_node, execute one of the following command:</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;* ``$ rosrun omronsentech_camera stcamera_node``</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;or</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;* ``$ roslaunch omronsentech_camera stcamera_node.launch``</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;If the node is run through stcamera_node.launch script, you can easily configure the parameters in stcamera_node.yaml to control which camera to connect. See the next section for the detail of parameter configuration.</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;### 3.1. Node Parameters</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;Parameters value are case sensitive. There are only three parameters to configure, as follows:</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  * **camera_to_connect** : used to assign which camera to connect. This parameter must be set before the stcamera_node is running. Changing this parameter when stcamera_node is running will not take any effect. Set empty to connect to the first found camera. Set to [&quot;all&quot;] to connect to all found camera. Set to the CAMERA_ID or CAMERA_MODEL(SERIAL) to only connect to the specified camera(s). Examples:</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    * ``camera_to_connect:[]``: Connect to first found camera.</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    * ``camera_to_connect:[&quot;all&quot;]``: Connect to all camera. If the keyword &#39;all&#39; presents, the nodes will attempt to connect to any found camera.</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    * ``camera_to_connect:[&quot;00:11:1c:f6:yy:xx&quot;,&quot;STC-MCS510U3V(00XXYY0)&quot;]``: Connect only to GigEVision camera with MAC address 00:11:1c:f6:yy:xx and USB3Vision camera with model STC-MCS510U3V and serial number 00XXYY0.</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    * ``camera_to_connect:[&quot;14210003XXYY&quot;]``: Connect only to USB3Vision camera with ID 14210003XXYY.</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  * **default_calibration_file** : full path to calibration file used by any connected camera if there is no calibration file configured for the camera. If this parameter is modified when the stcamera_node is running and the camera is already connected, please disable and re-enable image acquisition of the camera to take effect the changes. To generate the calibration file and rectify the image, please refer to the ROS tutorial as follows:</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      * http://wiki.ros.org/camera_calibration/Tutorials/MonocularCalibration</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      * http://wiki.ros.org/camera_calibration_parsers</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      * http://wiki.ros.org/image_proc</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  * *{dev\_CAMERA-NS}*/**calibration\_file** : Full path to calibration file for camera with namespace *{dev\_CAMERA-NS}*. If this parameter is modified when the stcamera_node is running and the camera is already connected, please disable and re-enable image acquisition of the camera to take effect the changes. See next section for the detail of the camera&#39;s namespace.</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;### 3.2. Camera Namespace</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;Once stcamera_node is connected to a camera, it will advertise topics and services correspond to the camera. To differentiate between the connected camera, each camera has its own namespace *{dev\_CAMERA-NS}*. The namespace *{dev\_CAMERA-NS}* is automatically generated by stcamera_node with the following rules:</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;* If the parameter **camera_to_connect** is empty or set to [&quot;all&quot;], the format of the namespace becomes *dev\_{CAMERA\_ID}*, where *{CAMERA\_ID}* is the ID of the camera. For example, if the connected camera has ID 14210003xxYY, the namespace becomes *dev_14210003xxYY*. Any non-alphanumeric characters in the camera ID, such as in GigEVision&#39;s MAC address, will be replaced with underscore.</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;* If the parameter **camera_to_connect** is set to either CAMERA\_MODEL(SERIAL) or CAMERA\_ID, the format of the namespace either becomes *dev\_{CAMERA\_MODEL\_SERIAL\_}* or *dev\_{CAMERA\_ID}*, respectively, depending on the parameter values. *{CAMERA\_MODEL\_SERIAL\_}* is the converted value from CAMERA_MODEL(SERIAL). *{CAMERA\_ID}* is the ID of the camera. Any non-alphanumeric characters in either of them will be replaced with underscore.</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;The namespace *{dev\_CAMERA-NS}* can also be retrieved from the value of *device_namespace* field returned by service call **get_device_list** or message from  **device_connection** topic.</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;### 3.3. Published Topics</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;The topics published by the stcamera_node are as follows:</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;No. | Topics | Description</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;:---: | ----------------------- | ----------------------------------------------</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;1. | **device_connection** | Published when connection or disconnection happened.</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;2. | *{dev\_CAMERA-NS}*/**camera_info** | Based on the ROS image_transport.</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;3. | *{dev\_CAMERA-NS}*/**chunk** | Published when chunk data is acquired.</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;4. | *{dev\_CAMERA-NS}*/**event** | Published when camera event is registered and event data corresponds to the registered event is acquired.</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;5. | *{dev\_CAMERA-NS}*/**image_raw\*** | Published when image data is acquired, based on the ROS image_transport.</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;### 3.4. Services</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;The services advertised by the stcamera_node are as follows:</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;*(Please be aware that the GenICam node mentioned below is a completely different thing from the ROS node)*:</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;* **get_device_list** : Get the list of detected devices information.</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;* **get_gige_ip** : Get the IP address of a given GigEVision camera&#39;s MAC.</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;* **get_module_list** : Get the list of the corresponding GenICam GenTL module name as follows: *System*, *Interface*, *LocalDevice*, *RemoteDevice*, and *DataStream*. The module name must be passed on as an argument when accessing a specific GenICam node. For example, to access *Gain* of the camera device using read or write_node service, you have to specify that the *Gain* resides in RemoteDevice module.</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;* **get_sdk_info** : Get the information of SentechSDK and GenTL producer version.</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;* **set_gige_ip** : Set the IP address of a given GigEVision camera&#39;s MAC.</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;* *{dev\_CAMERA-NS}*/**enable_chunk** : Enable or disable chunk.</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;* *{dev\_CAMERA-NS}*/**enable_event_acquisition** : Enable or disable event acquisition for a given module.</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;* *{dev\_CAMERA-NS}*/**enable_event_node** : Enable or disable event callback for a given GenICam node.</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;* *{dev\_CAMERA-NS}*/**enable_image_acquisition** : Enable or disable image acquisition. Image acquisition is automatically enabled when the camera is connected to the stcamera_node.</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;* *{dev\_CAMERA-NS}*/**enable_trigger** : Enable or disable trigger for a given trigger selector and source.</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;* *{dev\_CAMERA-NS}*/**execute_node** : Execute a given GenICam node that has interface type of Command.</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;* *{dev\_CAMERA-NS}*/**get_chunk_list** : Get the list of chunks supported by the camera.</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;* *{dev\_CAMERA-NS}*/**get_enum_list** : Get the list of enumeration of a given GenICam enumeration node.</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;* *{dev\_CAMERA-NS}*/**get_event_acquisition_status_list** : Get the event acquisition status for all modules.</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;* *{dev\_CAMERA-NS}*/**get_event_node_status_list** : Get the GenICam nodes event acquisition status for a given module.</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;* *{dev\_CAMERA-NS}*/**get_genicam_node_info** : Get information for a given GenICam node.</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;* *{dev\_CAMERA-NS}*/**get_image_acquisition_status** : Get the image acquisition status.</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;* *{dev\_CAMERA-NS}*/**get_last_error** : Get the last execution status information. See the next section for the list of available error codes.</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;* *{dev\_CAMERA-NS}*/**get_trigger_list** : Get the list of trigger supported by the camera.</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;* *{dev\_CAMERA-NS}*/**image_raw*** : Based on the ROS image_transport.</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;* *{dev\_CAMERA-NS}*/**read_node** : Read a given GenICam node regardless the node interface type.</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;* *{dev\_CAMERA-NS}*/**read_node_bool** : Read a given GenICam node that has interface type of boolean.</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;* *{dev\_CAMERA-NS}*/**read_node_enum** : Read a given GenICam node that has interface type of enumeration.</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;* *{dev\_CAMERA-NS}*/**read_node_float** : Read a given GenICam node that has interface type of float.</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;* *{dev\_CAMERA-NS}*/**read_node_int** : Read a given GenICam node that has interface type of integer.</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;* *{dev\_CAMERA-NS}*/**read_node_string** : Read a given GenICam node that has interface type of string.</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;* *{dev\_CAMERA-NS}*/**send_soft_trigger** : Send software trigger.</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;* *{dev\_CAMERA-NS}*/**set_camera_info** : Based on the ROS camera_info_manager (not directly used by this node)</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;* *{dev\_CAMERA-NS}*/**write_node** : Write string value to a given GenICam node regardless the node interface type. The internal of stcamera_node will automatically convert the value to the GenICam node&#39;s interface type.</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;* *{dev\_CAMERA-NS}*/**write_node_bool** : Write boolean value to a given GenICam node that has interface type of boolean.</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;* *{dev\_CAMERA-NS}*/**write_node_enum_int** : Write integer value to a given GenICam node that has interface type of enumeration.</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;* *{dev\_CAMERA-NS}*/**write_node_enum_str** : Write string value (symbolic name of the enumeration entry) to a given GenICam node that has interface type of enumeration.</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;* *{dev\_CAMERA-NS}*/**write_node_float** : Write float value to a given GenICam node that has interface type of float.</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;* *{dev\_CAMERA-NS}*/**write_node_int** : Write integer value to a given GenICam node that has interface type of integer.</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;* *{dev\_CAMERA-NS}*/**write_node_string** : Write string value to a given GenICam node that has interface type of string.</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;Attention:</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;* Depending on the camera model, some GenICam nodes cannot be accessed during image acquisition. In that case, please disable image acquisition before accessing the node by using service call **enable_image_acquisition** with parameter *false*. For example:&lt;br /&gt;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;``$ rosservice call /stcamera_node/dev_CAMERA-NS/enable_image_acquisition false``</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;* When writing to GenICam node with Integer interface type, the value must be a multiple of the increment value of the node. Use **get_genicam_node_info** to get the increment value of the node. The example below shows that the Width must be a multiple of 16:&lt;br /&gt;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;``$ rosservice call /stcamera_node/dev_CAMERA-NS/get_genicam_node_info RemoteDevice Width``</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;&lt;pre&gt;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;name: &quot;Width&quot;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;description: &quot;Width of the image provided by the device (in pixels).&quot;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;name_space: &quot;Standard&quot;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;interface_type: &quot;IInteger&quot;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;access_mode: &quot;Read Only&quot;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;is_cachable: &quot;Yes&quot;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;visibility: &quot;Beginner&quot;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;caching_mode: &quot;Write to register, write to cache on read&quot;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;is_streamable: True</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;enum_value_str_list: []</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;enum_value_int_list: []</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;current_value: &quot;2448&quot;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;min_value: &quot;64&quot;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;max_value: &quot;2448&quot;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;increment: &quot;16&quot;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;unit: &#39;&#39;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;child_node_list: []</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;&lt;/pre&gt;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;### 3.5. Error codes</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; Codes | Description</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; ---: | ---</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; &lt; 0 | GenTL error codes. Please refer to [GenICam GenTL documentation].</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; 0 | No error.</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; 30000 | GenICam GenericException occurred.</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; 30001 | Module name is invalid.</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; 30002 | (GenICam) Node is either invalid or inaccessible.</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; 30003 | Event already ON.</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; 30004 | Event already OFF.</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; 30005 | Image acquisition already ON.</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; 30006 | Image acquisition already OFF.</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; 30007 | Chunk is not supported.</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; 30008 | Chunk name is not valid.</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; 30009 | Trigger is not supported.</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; 30010 | Trigger name is not valid.</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; 30011 | Event is not supported.</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; 30012 | Event name is not valid.</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;## 4. Usage</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;### 4.1. Displaying acquired images with image_view and Changing Camera Gain:</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;For a simple viewing and operation, you can refer to the following steps:</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;* Launch the stcamera_node and allow to connect to all cameras:&lt;br /&gt;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;``$ roslaunch omronsentech_camera stcamera_node.launch``</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;* Get the camera namespace:&lt;br /&gt;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;``$ rosservice call /stcamera_node/get_device_list``&lt;br /&gt;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   Output:</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;&lt;pre&gt;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;device_list:</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    -</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    timestamp:</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      secs: 1521005471</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      nsecs: 777053680</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    device_id: &quot;142100030510&quot;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    device_model: &quot;STC-MCS510U3V&quot;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    device_serial: &quot;XXYYYZZ&quot;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    device_tltype: &quot;U3V&quot;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    device_tl_specific_field: []</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    device_tl_specific_value: []</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    device_gentl_info:</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      vendor: &quot;OMRON_SENTECH&quot;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      version: &quot;1.5&quot;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      producer_version: &quot;1.5.X.X.X&quot;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      full_path: &quot;/opt/sentech/lib/libstgentl.cti&quot;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      tltype: &quot;Mixed&quot;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    device_namespace: &quot;dev_14210XXYYYZZ&quot;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    connected: True</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;&lt;/pre&gt;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;* Run the image_view:&lt;br /&gt;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;``$ rosrun image_view image_view image:=/stcamera_node/dev_14210XXYYYZZ/image_raw`` where dev_14210XXYYYZZ is the namespace of the connected camera.</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;* To change the gain of the camera (IFloat type) to 100.0, for example, use the GenICam write node service as follows:&lt;br /&gt;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;``$ rosservice call /stcamera_node/dev_14210XXYYYZZ/write_node_float RemoteDevice Gain 100.0``&lt;br /&gt; or &lt;br /&gt;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;``$ rosservice call /stcamera_node/dev_14210XXYYYZZ/write_node RemoteDevice Gain &quot;&#39;100.0&#39;&quot;``</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;* To read the current gain value, you can use the GenICam read node service as follows:&lt;br /&gt;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;``$ rosservice call /stcamera_node/dev_14210XXYYYZZ/read_node_float RemoteDevice``&lt;br /&gt; or &lt;br /&gt;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;``$ rosservice call /stcamera_node/dev_14210XXYYYZZ/read_node RemoteDevice Gain``</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;* To check the Gain node information by using **get_genicam_node_info** :&lt;br /&gt;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;``$ rosservice call /stcamera_node/dev_14210XXYYYZZ/get_genicam_node_info RemoteDevice Gain``&lt;br /&gt;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;Output:</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;&lt;pre&gt;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;name: &quot;Gain&quot;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;description: &quot;Controls the selected gain as an absolute physical value. This is an amplification\</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   \ factor applied to the video signal.&quot;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;name_space: &quot;Standard&quot;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;interface_type: &quot;IFloat&quot;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;access_mode: &quot;Read and Write&quot;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;is_cachable: &quot;Yes&quot;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;visibility: &quot;Beginner&quot;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;caching_mode: &quot;Write to register, write to cache on read&quot;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;is_streamable: True</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;enum_value_str_list: []</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;enum_value_int_list: []</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;current_value: &quot;100&quot;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;min_value: &quot;0.000000&quot;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;max_value: &quot;192.000000&quot;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;increment: &#39;&#39;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;unit: &#39;&#39;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;child_node_list: []</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;&lt;/pre&gt;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;### 4.2. Launch Script Examples and Termination</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;Examples of launch script and their parameters are included in the package. Please refer to the following procedure to use them:</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;* **stcamera_node.launch**:</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;This launch script will run stcamera_node. The node will attempt to connect to any detected cameras. You can directly launch this script without any modification or configure the calibration file (optional) in stcamera_node.yaml.</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;* **stcamera_nodelet_manager.launch**:</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;This launch script will run the nodelet version of stcamera_node. The node will attempt to connect to any detected cameras. You can directly launch this script without any modification or configure the calibration file (optional) in stcamera_nodelet_manager.yaml.</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;* **stcamera_node_imageproc.launch**:</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;This launch script will run two nodes: stcamera_node and image_view that displays streamed images from the connected camera. To launch this script, you have to modify the launch script and configuration file by specifying the CAMERA_ID or CAMERA_MODEL(SERIAL), the namespace dev_CAMERA-NS, and the calibration file (optional).</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  * Change the argument **camera_namespace** in the launch file:&lt;br /&gt; ``&lt;arg name=&quot;camera_namespace&quot; default=&quot;dev_CAMERA-NS&quot; /&gt;``</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  * Change the parameter of **camera_to_connect** in the yaml file:&lt;br /&gt; ``camera_to_connect: [&quot;CAMERA_ID or CAMERA_MODEL(SERIAL)&quot;]``</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  * Change the calibration path file either **default_calibration_file** or *{dev_CAMERA-NS}*/**calibration_file** (optional):&lt;br /&gt;``default_calibration_file: file:///home/mydata/calibration.xml``</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;To terminate the stcamera_node, use the following ROS command:&lt;br /&gt;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;``$ rosnode kill /stcamera_node``</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;### 4.3. Node Client Examples</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;In the examples folder, node &quot;grabber&quot; is provided as a straightforward node client of stcamera_node. The grabber (provided in C++ and Python) does the following:</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;1. Display the SentechSDK and GenTL information by calling **get_sdk_info**.</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;2. Search for a connected camera and get the camera namespace by calling **get_device_list**.</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;3. Read and write the camera&#39;s Gain by calling **get_genicam_node_info** and **write_node_float** respectively.</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;4. Subscribe to image_raw topic and grab up to 10 images. The image sizes and encoding information are printed on screen.</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;5. Set trigger mode to ON (trigger selector is set to FrameStart and the source is set to Software) by calling **enable_trigger**), then grab up to 10 images with interval 1 seconds in between by sending software trigger through **send_soft_trigger**.</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;If you are using GigEVision camera, please ensure that the camera has a valid IP address. The IP address can be checked by calling either **get_device_list** or **get_gige_ip**. A static IP address can be assigned by using **set_gige_ip** service call. For example: &lt;br /&gt;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;``$ rosservice call /stcamera_node/get_gige_ip &quot;00:11:1c:xx:xx:xx&quot;`` to display the current IP address of GigEVision camera with MAC 00:11:1c:xx:xx:xx, and</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;&lt;br /&gt;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;``$ rosservice call /stcamera_node/set_gige_ip &quot;00:11:1c:xx:xx:xx&quot; 192.168.y.z 255.255.255.0 0.0.0.0`` to assign a static IP address to GigEVision camera with MAC 00:11:1c:xx:xx:xx.</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;## 5. Customization</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;The stcamera_node provides generic functionality to control the OMRON SENTECH camera. If customization is needed to accommodate a specific camera, you can extend StCameraInterface class and either create a new ROS node or modify the existing stcamera_node (StCameraNode class) to support the specific camera. If you prefer the latter, you will need to modify the initialization process of the camera interface in StCameraNode class which can be found in function initializeCamera(). Please refer to the doxygen documentation for the structure of the StCameraInterface and the StCameraNode classes.</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;## 6. Questions/Feedbacks and Bug Reports</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;If you have any questions/feedbacks or found any bugs, please contact support@sentech.co.jp.</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;[GenICam GenApi documentation]:http://www.emva.org/wp-content/uploads/GenICam_Standard_v2_0.pdf</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;[GenICam GenTL documentation]:http://www.emva.org/wp-content/uploads/GenICam_GenTL_1_5.pdf</div></div><!-- fragment --></div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/omronsentech_camera">omronsentech_camera</a><br />
Author(s): </br />
<small>autogenerated on Fri Apr 13 2018 09:44:09</small>
</div>
</body>
</html>
